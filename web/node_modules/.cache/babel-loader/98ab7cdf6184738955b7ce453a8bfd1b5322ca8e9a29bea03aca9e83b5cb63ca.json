{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{useMutation}from'react-query';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_BASE_URL='http://localhost:8000/api/v1';const RegisterPage=()=>{const navigate=useNavigate();const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[passwordConfirm,setPasswordConfirm]=useState('');const[phone,setPhone]=useState('');const[cpf,setCpf]=useState('');const registerMutation=useMutation(data=>axios.post(\"\".concat(API_BASE_URL,\"/auth/register/\"),data),{onSuccess:()=>{alert('Conta criada com sucesso!');navigate('/login');},onError:error=>{var _error$response;const errors=((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||{};const errorMessage=Object.values(errors).flat().join('\\n');alert(errorMessage||'Erro ao criar conta');}});const handleRegister=()=>{if(!email||!password||!passwordConfirm){alert('Preencha todos os campos obrigatórios');return;}if(password!==passwordConfirm){alert('As senhas não coincidem');return;}registerMutation.mutate({email,password,password_confirm:passwordConfirm,phone,cpf});};return/*#__PURE__*/_jsxs(\"div\",{className:\"register-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Grana.AI\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"Cadastro\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"Email\",value:email,onChange:e=>setEmail(e.target.value),autoComplete:\"username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Senha\",value:password,onChange:e=>setPassword(e.target.value),autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirmar Senha\",value:passwordConfirm,onChange:e=>setPasswordConfirm(e.target.value),autoComplete:\"new-password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",placeholder:\"Telefone (opcional)\",value:phone,onChange:e=>setPhone(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"CPF (opcional)\",value:cpf,onChange:e=>setCpf(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRegister,disabled:registerMutation.isLoading,children:registerMutation.isLoading?'Criando conta...':'Cadastrar'}),/*#__PURE__*/_jsxs(\"p\",{children:[\"J\\xE1 tem conta? \",/*#__PURE__*/_jsx(\"a\",{href:\"/login\",children:\"Fa\\xE7a login\"})]})]});};export default RegisterPage;","map":{"version":3,"names":["React","useState","useNavigate","useMutation","axios","jsx","_jsx","jsxs","_jsxs","API_BASE_URL","RegisterPage","navigate","email","setEmail","password","setPassword","passwordConfirm","setPasswordConfirm","phone","setPhone","cpf","setCpf","registerMutation","data","post","concat","onSuccess","alert","onError","error","_error$response","errors","response","errorMessage","Object","values","flat","join","handleRegister","mutate","password_confirm","className","children","type","placeholder","value","onChange","e","target","autoComplete","onClick","disabled","isLoading","href"],"sources":["/Users/hatusbatista/Documents/GranaApp/web/src/pages/RegisterPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useMutation } from 'react-query';\nimport axios from 'axios';\n\nconst API_BASE_URL = 'http://localhost:8000/api/v1';\n\nconst RegisterPage = () => {\n  const navigate = useNavigate();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [passwordConfirm, setPasswordConfirm] = useState('');\n  const [phone, setPhone] = useState('');\n  const [cpf, setCpf] = useState('');\n\n  const registerMutation = useMutation(\n    (data: { email: string; password: string; password_confirm: string; phone: string; cpf: string }) =>\n      axios.post(`${API_BASE_URL}/auth/register/`, data),\n    {\n      onSuccess: () => {\n        alert('Conta criada com sucesso!');\n        navigate('/login');\n      },\n      onError: (error: any) => {\n        const errors = error.response?.data || {};\n        const errorMessage = Object.values(errors).flat().join('\\n');\n        alert(errorMessage || 'Erro ao criar conta');\n      },\n    }\n  );\n\n  const handleRegister = () => {\n    if (!email || !password || !passwordConfirm) {\n      alert('Preencha todos os campos obrigatórios');\n      return;\n    }\n    if (password !== passwordConfirm) {\n      alert('As senhas não coincidem');\n      return;\n    }\n    registerMutation.mutate({ email, password, password_confirm: passwordConfirm, phone, cpf });\n  };\n\n  return (\n    <div className=\"register-container\">\n      <h1>Grana.AI</h1>\n      <h2>Cadastro</h2>\n      <input\n        type=\"email\"\n        placeholder=\"Email\"\n        value={email}\n        onChange={(e) => setEmail(e.target.value)}\n        autoComplete=\"username\"\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Senha\"\n        value={password}\n        onChange={(e) => setPassword(e.target.value)}\n        autoComplete=\"new-password\"\n      />\n      <input\n        type=\"password\"\n        placeholder=\"Confirmar Senha\"\n        value={passwordConfirm}\n        onChange={(e) => setPasswordConfirm(e.target.value)}\n        autoComplete=\"new-password\"\n      />\n      <input\n        type=\"tel\"\n        placeholder=\"Telefone (opcional)\"\n        value={phone}\n        onChange={(e) => setPhone(e.target.value)}\n      />\n      <input\n        type=\"text\"\n        placeholder=\"CPF (opcional)\"\n        value={cpf}\n        onChange={(e) => setCpf(e.target.value)}\n      />\n      <button onClick={handleRegister} disabled={registerMutation.isLoading}>\n        {registerMutation.isLoading ? 'Criando conta...' : 'Cadastrar'}\n      </button>\n      <p>\n        Já tem conta? <a href=\"/login\">Faça login</a>\n      </p>\n    </div>\n  );\n};\n\nexport default RegisterPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}